"use strict";(self.webpackChunkurl_shortener_system=self.webpackChunkurl_shortener_system||[]).push([[693],{9693:(q,f,i)=>{i.r(f),i.d(f,{HomeModule:()=>k});var _=i(3599),u=i(63),c=i(433),v=i(298),m=i(7907),p=i(6339),t=i(8256),d=i(9523),h=i(5798),g=i(5495),b=i(6895);let y=(()=>{class r extends((0,v.hM)()){constructor(e,o,l,n){super(),this.activeModal=e,this._formBuilder=o,this._urlService=l,this._toastService=n,this.rootUrl=(0,p.Cx)(),this.rootCustomUrl=`${this.rootUrl}.cust`,this.formGroup=this._createForm()}onClose(e=null){this.activeModal.close(e)}onSubmit(){const{longUrl:e,shortUrl:o,expiryDate:l}=this.formGroup.value;this._urlService.create({longUrl:e,shortUrl:o,expiryDate:l}).subscribe(n=>{(0,p.vQ)(n.shortUrl,U=>{U||this._toastService.add({title:"URL copied",message:`The newly generated short URL ${this.rootUrl}${n.shortUrl} has been copied to your clipboard`,type:m.p.info})}),this.onClose(n)})}_createForm(){return this._formBuilder.group({longUrl:[null,[c.kI.required,c.kI.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]],shortUrl:[null,[]]})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.Kz),t.Y36(c.qu),t.Y36(h.Q),t.Y36(g.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-url-dialog"]],features:[t.qOj],decls:27,vars:5,consts:[[1,"col-12","d-flex","justify-content-center"],[1,"col-12",3,"formGroup","submit"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],["for","longUrl"],["type","url","id","longUrl","formControlName","longUrl","placeholder","ie: https://my-very-very-ver-ylong-url.com",1,"form-control",3,"ngClass"],["id","shortUrlHelp",1,"form-text","text-muted"],["for","shortUrl"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["id","shortUrl","formControlName","shortUrl","placeholder","my-custom-url",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-block","col-12",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"h4",3),t._uU(4,"Shorten an URL"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"URL"),t.qZA(),t._UZ(10,"input",8),t.TgZ(11,"small",9),t._uU(12,"Enter the URL to shorten"),t.qZA()(),t._UZ(13,"hr"),t.TgZ(14,"div",6)(15,"label",10),t._uU(16,"Custom Short URL"),t.qZA(),t.TgZ(17,"div",11)(18,"div",12)(19,"span",13),t._uU(20),t.qZA()(),t._UZ(21,"input",14),t.TgZ(22,"small",9),t._uU(23,"You can create your own short URL if available."),t.qZA()()()(),t.TgZ(24,"div",15)(25,"button",16),t._uU(26," Submit "),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(9),t.Q6J("ngClass",o.fieldClasses("longUrl")),t.xp6(10),t.Oqu(o.rootCustomUrl),t.xp6(1),t.Q6J("ngClass",o.fieldClasses("shortUrl")),t.xp6(4),t.Q6J("disabled",!o.formGroup.valid))},dependencies:[b.mk,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]}),r})(),Z=(()=>{class r{constructor(e,o,l){this.activeModal=e,this._toastService=o,this._urlsService=l}onClose(e=!1){this.activeModal.close(e)}onDelete(){this._urlsService.removeById(this.userUrl.id).subscribe(()=>{this._toastService.add({title:"URL removed",message:`The redirection for URL ${this.userUrl.longUrl} has been removed`,type:m.p.info}),this.onClose(!0)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.Kz),t.Y36(g.k),t.Y36(h.Q))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-remove-url-dialog"]],decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-info"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Remove URL"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p"),t._uU(6," Are you sure you want to remove the record on "),t.TgZ(7,"span",4),t._uU(8),t.qZA(),t._uU(9,"? If so, the redirect link will not function anymore. "),t.qZA()(),t.TgZ(10,"div",5)(11,"button",6),t.NdJ("click",function(){return o.onClose()}),t._uU(12," Cancel "),t.qZA(),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.onDelete()}),t._uU(14," Remove "),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(o.userUrl?o.userUrl.longUrl:"N/A"))}}),r})();var C=i(4155);let T=(()=>{class r{constructor(e,o){this.activeModal=e,this._urlsService=o,this.userUrlStats=[],this.chartOptions={responsive:!0,maintainAspectRatio:!1},this.chartLabels=[],this.chartData=[{data:[],label:"N/A"}]}get userUrl(){return this._userUrl}set userUrl(e){this._userUrl=e,this._fetchStats()}onClose(){this.activeModal.close()}_fetchStats(){this._urlsService.readStats(this.userUrl.id).subscribe(e=>{this.userUrlStats=e,this._prepareData()})}_prepareData(){const e=this.userUrlStats.reduce((l,n)=>({...l,[n.referrer]:(l[n.referrer]||0)+1}),{}),o=Object.keys(e);this.chartLabels=o,this.chartData=[{data:Object.values(e),label:"Referrers"}]}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.Kz),t.Y36(h.Q))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-url-stats-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-info"],[1,"col-12",2,"height","60vh"],["baseChart","","type","radar",3,"datasets","labels","options"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Usage Statistics"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p"),t._uU(6," Find below the statistics we collected on your short URL for "),t.TgZ(7,"span",4),t._uU(8),t.qZA()(),t.TgZ(9,"div",5),t._UZ(10,"canvas",6),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(o.userUrl?o.userUrl.longUrl:"N/A"),t.xp6(2),t.Q6J("datasets",o.chartData)("labels",o.chartLabels)("options",o.chartOptions))},dependencies:[C.jh]}),r})();function A(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th",8),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",9),t._uU(6),t.qZA(),t.TgZ(7,"td",9),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td",9),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td")(14,"button",10),t.NdJ("click",function(){const n=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onCopy(n))}),t._UZ(15,"img",11),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){const n=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onDisplayStats(n))}),t._UZ(17,"img",13),t.qZA(),t.TgZ(18,"button",14),t.NdJ("click",function(){const n=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onDelete(n))}),t._UZ(19,"img",15),t.qZA()()()}if(2&r){const e=s.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.hij(" ",e.longUrl," "),t.xp6(2),t.Oqu(e.shortUrl),t.xp6(2),t.Oqu(t.lcZ(9,5,e.createDate)),t.xp6(3),t.Oqu(t.lcZ(12,7,e.expiryDate))}}const S=[{path:u._.default,children:[{path:u._.default,redirectTo:`/${u._.home}/${u._.myUrls}`,pathMatch:u.D},{path:u._.myUrls,component:(()=>{class r{constructor(e,o,l){this._ngbModal=e,this._urlsService=o,this._toastService=l,this.rootUrl=(0,p.Cx)(),this.userUrls=[]}ngOnInit(){this.onRefresh()}onAdd(){this._ngbModal.open(y).result.then(o=>{!o||this.onRefresh()})}onCopy(e){(0,p.vQ)(e.shortUrl,l=>{let n="URL copied",a="The short URL has been copied to your clipboard",U=m.p.info;l&&(n="Failure on copying URL",a=l.message,U=m.p.error),this._toastService.add({title:n,message:a,type:U})})}onDisplayStats(e){this._ngbModal.open(T,{fullscreen:!0}).componentInstance.userUrl=e}onDelete(e){const o=this._ngbModal.open(Z);o.componentInstance.userUrl=e,o.result.then(l=>{!l||this.onRefresh()})}onRefresh(){this._urlsService.readAll().subscribe(e=>this.userUrls=e.map(o=>({...o,shortUrl:[this.rootUrl,o.shortUrl].join("/")})))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.FF),t.Y36(h.Q),t.Y36(g.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-my-urls"]],decls:23,vars:1,consts:[[1,"d-xs-table-row","d-md-flex","col-12"],[1,"d-flex","align-items-center","ms-auto"],["type","button","id","btn-shorten-url",1,"btn","btn-outline-secondary","btn-sm","me-1","ms-auto",3,"click"],["type","button","id","btn-shorten-url",1,"btn","btn-outline-primary","btn-sm","me-2","ms-1",3,"click"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"d-none","d-md-table-cell"],[4,"ngFor","ngForOf"],["scope","row"],[1,"d-none","d-md-table-cell"],["type","button","title","Copy Short URL",1,"btn","btn-sm",3,"click"],["src","/assets/img/copy.svg","alt","Copy Short URL","width","25","height","25"],["type","button","title","Display URL Stats",1,"btn","btn-sm",3,"click"],["src","/assets/img/stats.svg","alt","Display URL Stats","width","25","height","25"],["type","button","title","Remove Short URL",1,"btn","btn-sm",3,"click"],["src","/assets/img/delete.svg","alt","Delete Short URL","width","25","height","25"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.onRefresh()}),t._uU(3," Refresh "),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.onAdd()}),t._uU(5," Shorten an URL "),t.qZA()()(),t.TgZ(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),t._uU(10,"#"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"URL"),t.qZA(),t.TgZ(13,"th",6),t._uU(14,"Short URL"),t.qZA(),t.TgZ(15,"th",6),t._uU(16,"Create Date"),t.qZA(),t.TgZ(17,"th",6),t._uU(18,"Expiry Date"),t.qZA(),t.TgZ(19,"th",5),t._uU(20,"Actions"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,A,20,9,"tr",7),t.qZA()()),2&e&&(t.xp6(22),t.Q6J("ngForOf",o.userUrls))},dependencies:[b.sg,b.uU]}),r})(),data:{title:"My URLs",description:"Manage your URLs"}}]}];let D=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.Bz.forChild(S),_.Bz]}),r})();var M=i(4466);let k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[M.m,D]}),r})()}}]);