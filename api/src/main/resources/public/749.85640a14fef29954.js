"use strict";(self.webpackChunkurl_shortener_system=self.webpackChunkurl_shortener_system||[]).push([[749],{9749:(F,f,a)=>{a.r(f),a.d(f,{HomeModule:()=>J});var y=a(3599),p=a(63),c=a(433),v=a(298),d=a(7907),h=a(6339),t=a(4650),m=a(9523),U=a(5798),g=a(5495),b=a(6895);let C=(()=>{class r extends((0,v.hM)()){constructor(e,o,l,s){super(),this.activeModal=e,this._formBuilder=o,this._urlService=l,this._toastService=s,this.rootUrl=(0,h.Cx)(),this.rootCustomUrl=`${this.rootUrl}.cust`,this.formGroup=this._createForm()}onClose(e=null){this.activeModal.close(e)}onSubmit(){const{longUrl:e,shortUrl:o,expiryDate:l}=this.formGroup.value;this._urlService.create({longUrl:e,shortUrl:o?.trim().length?o.trim():null,expiryDate:l}).subscribe(s=>{(0,h.vQ)(s.shortUrl,u=>{u||this._toastService.add({title:"URL copied",message:`The newly generated short URL ${this.rootUrl}${s.shortUrl} has been copied to your clipboard`,type:d.p.info})}),this.onClose(s)})}_createForm(){const e=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?");return this._formBuilder.group({longUrl:[null,[c.kI.required,c.kI.pattern(e)]],shortUrl:[null,[]]})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(c.qu),t.Y36(U.Q),t.Y36(g.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-url-dialog"]],features:[t.qOj],decls:27,vars:5,consts:[[1,"col-12","d-flex","justify-content-center"],[1,"col-12",3,"formGroup","submit"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],["for","longUrl"],["type","url","id","longUrl","formControlName","longUrl","placeholder","ie: https://my-very-very-ver-ylong-url.com",1,"form-control",3,"ngClass"],["id","shortUrlHelp",1,"form-text","text-muted"],["for","shortUrl"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["id","shortUrl","formControlName","shortUrl","placeholder","my-custom-url",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-block","col-12",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"h4",3),t._uU(4,"Shorten an URL"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"URL"),t.qZA(),t._UZ(10,"input",8),t.TgZ(11,"small",9),t._uU(12,"Enter the URL to shorten"),t.qZA()(),t._UZ(13,"hr"),t.TgZ(14,"div",6)(15,"label",10),t._uU(16,"Custom Short URL"),t.qZA(),t.TgZ(17,"div",11)(18,"div",12)(19,"span",13),t._uU(20),t.qZA()(),t._UZ(21,"input",14),t.TgZ(22,"small",9),t._uU(23,"You can create your own short URL if available."),t.qZA()()()(),t.TgZ(24,"div",15)(25,"button",16),t._uU(26," Submit "),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(9),t.Q6J("ngClass",o.fieldClasses("longUrl")),t.xp6(10),t.Oqu(o.rootCustomUrl),t.xp6(1),t.Q6J("ngClass",o.fieldClasses("shortUrl")),t.xp6(4),t.Q6J("disabled",!o.formGroup.valid))},dependencies:[b.mk,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]}),r})(),Z=(()=>{class r{constructor(e,o,l){this.activeModal=e,this._toastService=o,this._urlsService=l}onClose(e=!1){this.activeModal.close(e)}onDelete(){this._urlsService.removeById(this.userUrl.id).subscribe(()=>{this._toastService.add({title:"URL removed",message:`The redirection for URL ${this.userUrl.longUrl} has been removed`,type:d.p.info}),this.onClose(!0)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(g.k),t.Y36(U.Q))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-remove-url-dialog"]],decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-info"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Remove URL"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p"),t._uU(6," Are you sure you want to remove the record on "),t.TgZ(7,"span",4),t._uU(8),t.qZA(),t._uU(9,"? If so, the redirect link will not function anymore. "),t.qZA()(),t.TgZ(10,"div",5)(11,"button",6),t.NdJ("click",function(){return o.onClose()}),t._uU(12," Cancel "),t.qZA(),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.onDelete()}),t._uU(14," Remove "),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(o.userUrl?o.userUrl.longUrl:"N/A"))}}),r})();var T=a(4155);let A=(()=>{class r{constructor(e,o){this.activeModal=e,this._urlsService=o,this.userUrlStats=[],this.chartOptions={responsive:!0,maintainAspectRatio:!1},this.chartLabels=[],this.chartData=[{data:[],label:"N/A"}]}get userUrl(){return this._userUrl}set userUrl(e){this._userUrl=e,this._fetchStats()}onClose(){this.activeModal.close()}_fetchStats(){this._urlsService.readStats(this.userUrl.id).subscribe(e=>{this.userUrlStats=e,this._prepareData()})}_prepareData(){const e=this.userUrlStats.reduce((l,s)=>({...l,[s.referrer]:(l[s.referrer]||0)+1}),{}),o=Object.keys(e);this.chartLabels=o,this.chartData=[{data:Object.values(e),label:"Referrers"}]}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(U.Q))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-url-stats-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-info"],[1,"col-12",2,"height","60vh"],["baseChart","","type","radar",3,"datasets","labels","options"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Usage Statistics"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p"),t._uU(6," Find below the statistics we collected on your short URL for "),t.TgZ(7,"span",4),t._uU(8),t.qZA()(),t.TgZ(9,"div",5),t._UZ(10,"canvas",6),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(o.userUrl?o.userUrl.longUrl:"N/A"),t.xp6(2),t.Q6J("datasets",o.chartData)("labels",o.chartLabels)("options",o.chartOptions))},dependencies:[T.jh]}),r})(),R=(()=>{class r{constructor(e){this._toastService=e,this.action="Copy to clipboard"}onCopy(){(0,h.vQ)(this.value,o=>{let l=this.title,s=this.message,i=d.p.info;o&&(l="Failure on copying",s=o.message,i=d.p.error),this._toastService.add({title:l,message:s,type:i})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-copy-clipboard-btn"]],inputs:{value:"value",title:"title",message:"message",action:"action",className:"className"},decls:2,vars:3,consts:[["type","button",3,"ngClass","ngbTooltip","click"],["src","/assets/img/copy.svg","width","25","height","25",3,"alt"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.onCopy()}),t._UZ(1,"img",1),t.qZA()),2&e&&(t.Q6J("ngClass","btn btn-sm "+o.className)("ngbTooltip",o.action),t.xp6(1),t.Q6J("alt",o.action))},dependencies:[b.mk,m._L]}),r})(),S=(()=>{class r{transform(e,o=!1,l=20,s="..."){if(!e||e.length<=l)return e;let i=0,u=l,_="";return o&&(u=e.length,i=u-l,_=s,s=""),_+e.substring(i,u).trim()+s}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"truncate",type:r,pure:!0}),r})();function L(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th",8),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"span",9),t._uU(5),t.ALo(6,"truncate"),t.qZA(),t._UZ(7,"app-copy-clipboard-btn",10),t.qZA(),t.TgZ(8,"td",11)(9,"span",9),t._uU(10),t.ALo(11,"truncate"),t.qZA(),t._UZ(12,"app-copy-clipboard-btn",12),t.qZA(),t.TgZ(13,"td",11),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",11),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"td"),t._UZ(20,"app-copy-clipboard-btn",13),t.TgZ(21,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.onDisplayStats(s))}),t._UZ(22,"img",15),t.qZA(),t.TgZ(23,"button",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.onDelete(s))}),t._UZ(24,"img",17),t.qZA()()()}if(2&r){const e=n.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Q6J("ngbTooltip",e.longUrl),t.xp6(1),t.hij(" ",t.lcZ(6,10,e.longUrl)," "),t.xp6(2),t.Q6J("value",e.longUrl),t.xp6(2),t.Q6J("ngbTooltip",e.shortUrl),t.xp6(1),t.hij(" ",t.xi3(11,12,e.shortUrl,!0)," "),t.xp6(2),t.Q6J("value",e.shortUrl),t.xp6(2),t.Oqu(t.lcZ(15,15,e.createDate)),t.xp6(3),t.Oqu(t.lcZ(18,17,e.expiryDate)),t.xp6(3),t.Q6J("value",e.shortUrl)}}const D=[{path:p._.default,children:[{path:p._.default,redirectTo:`/${p._.home}/${p._.myUrls}`,pathMatch:p.D},{path:p._.myUrls,component:(()=>{class r{constructor(e,o,l){this._ngbModal=e,this._urlsService=o,this._toastService=l,this.rootUrl=(0,h.Cx)(),this.userUrls=[]}ngOnInit(){this.onRefresh()}onAdd(){this._ngbModal.open(C).result.then(o=>{!o||this.onRefresh()})}onCopy(e){(0,h.vQ)(e.shortUrl,l=>{let s="URL copied",i="The short URL has been copied to your clipboard",u=d.p.info;l&&(s="Failure on copying URL",i=l.message,u=d.p.error),this._toastService.add({title:s,message:i,type:u})})}onDisplayStats(e){this._ngbModal.open(A,{fullscreen:!0}).componentInstance.userUrl=e}onDelete(e){const o=this._ngbModal.open(Z);o.componentInstance.userUrl=e,o.result.then(l=>{!l||this.onRefresh()})}onRefresh(){this._urlsService.readAll().subscribe(e=>this.userUrls=e.map(o=>({...o,shortUrl:[this.rootUrl,o.shortUrl].join("/")})))}trackById(e,o){return o.id}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.FF),t.Y36(U.Q),t.Y36(g.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-my-urls"]],decls:23,vars:2,consts:[[1,"d-xs-table-row","d-md-flex","col-12"],[1,"d-flex","align-items-center","ms-auto"],["type","button","id","btn-shorten-url",1,"btn","btn-outline-secondary","btn-sm","me-1","ms-auto",3,"click"],["type","button","id","btn-shorten-url",1,"btn","btn-outline-primary","btn-sm","me-2","ms-1",3,"click"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"d-none","d-md-table-cell"],[4,"ngFor","ngForOf","ngForTrackBy"],["scope","row"],[3,"ngbTooltip"],["className","d-none d-md-table-cell","title","URL copied","message","The long URL has been copied to your clipboard",3,"value"],[1,"d-none","d-md-table-cell"],["title","URL copied","message","The short URL has been copied to your clipboard",3,"value"],["className","d-table-cell d-md-none","title","URL copied","message","The short URL has been copied to your clipboard",3,"value"],["type","button","ngbTooltip","Display URL Stats",1,"btn","btn-sm",3,"click"],["src","/assets/img/stats.svg","alt","Display URL Stats","width","25","height","25"],["type","button","ngbTooltip","Remove Short URL",1,"btn","btn-sm",3,"click"],["src","/assets/img/delete.svg","alt","Delete Short URL","width","25","height","25"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.onRefresh()}),t._uU(3," Refresh "),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.onAdd()}),t._uU(5," Shorten an URL "),t.qZA()()(),t.TgZ(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),t._uU(10,"#"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"URL"),t.qZA(),t.TgZ(13,"th",6),t._uU(14,"Short URL"),t.qZA(),t.TgZ(15,"th",6),t._uU(16,"Create Date"),t.qZA(),t.TgZ(17,"th",6),t._uU(18,"Expiry Date"),t.qZA(),t.TgZ(19,"th",5),t._uU(20,"Actions"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,L,25,19,"tr",7),t.qZA()()),2&e&&(t.xp6(22),t.Q6J("ngForOf",o.userUrls)("ngForTrackBy",o.trackById))},dependencies:[b.sg,m._L,R,b.uU,S]}),r})(),data:{title:"My URLs",description:"Manage your URLs"}}]}];let q=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[y.Bz.forChild(D),y.Bz]}),r})();var M=a(4466);let J=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[M.m,q]}),r})()}}]);