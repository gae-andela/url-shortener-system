"use strict";(self.webpackChunkurl_shortener_system=self.webpackChunkurl_shortener_system||[]).push([[749],{9749:(x,f,i)=>{i.r(f),i.d(f,{HomeModule:()=>w});var y=i(3599),d=i(63),p=i(433),C=i(298),m=i(7907),h=i(6339),t=i(4650),c=i(9523),U=i(5798),b=i(5495),g=i(6895);let v=(()=>{class r extends((0,C.hM)()){constructor(e,o,n,l){super(),this.activeModal=e,this._formBuilder=o,this._urlService=n,this._toastService=l,this.rootUrl=(0,h.Cx)(),this.rootCustomUrl=`${this.rootUrl}.cust`,this.formGroup=this._createForm()}onClose(e=null){this.activeModal.close(e)}onSubmit(){const{longUrl:e,shortUrl:o,expiryDate:n}=this.formGroup.value;this._urlService.create({longUrl:e,shortUrl:o?.trim().length?o.trim():null,expiryDate:n}).subscribe(l=>{const u=[(0,h.Cx)(),l.shortUrl].join("/");(0,h.vQ)(u,_=>{_||this._toastService.add({title:"URL copied",message:`The newly generated short URL ${this.rootUrl}${l.shortUrl} has been copied to your clipboard`,type:m.p.info})}),this.onClose(l)})}_createForm(){const e=new RegExp("^(http[s]?://(www.)?|ftp://(www.)?|www.){1}(.+)*?$");return this._formBuilder.group({longUrl:[null,[p.kI.required,p.kI.pattern(e)]],shortUrl:[null,[]]})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.Kz),t.Y36(p.qu),t.Y36(U.Q),t.Y36(b.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-url-dialog"]],features:[t.qOj],decls:27,vars:5,consts:[[1,"col-12","d-flex","justify-content-center"],[1,"col-12",3,"formGroup","submit"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],["for","longUrl"],["type","url","id","longUrl","formControlName","longUrl","placeholder","ie: https://my-very-very-ver-ylong-url.com",1,"form-control",3,"ngClass"],["id","shortUrlHelp",1,"form-text","text-muted"],["for","shortUrl"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["id","shortUrl","formControlName","shortUrl","placeholder","my-custom-url",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-block","col-12",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(2,"div",2)(3,"h4",3),t._uU(4,"Shorten an URL"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"URL"),t.qZA(),t._UZ(10,"input",8),t.TgZ(11,"small",9),t._uU(12,"Enter the URL to shorten"),t.qZA()(),t._UZ(13,"hr"),t.TgZ(14,"div",6)(15,"label",10),t._uU(16,"Custom Short URL"),t.qZA(),t.TgZ(17,"div",11)(18,"div",12)(19,"span",13),t._uU(20),t.qZA()(),t._UZ(21,"input",14),t.TgZ(22,"small",9),t._uU(23,"You can create your own short URL if available."),t.qZA()()()(),t.TgZ(24,"div",15)(25,"button",16),t._uU(26," Submit "),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formGroup),t.xp6(9),t.Q6J("ngClass",o.fieldClasses("longUrl")),t.xp6(10),t.Oqu(o.rootCustomUrl),t.xp6(1),t.Q6J("ngClass",o.fieldClasses("shortUrl")),t.xp6(4),t.Q6J("disabled",!o.formGroup.valid))},dependencies:[g.mk,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u]}),r})(),T=(()=>{class r{constructor(e,o,n){this.activeModal=e,this._toastService=o,this._urlsService=n}onClose(e=!1){this.activeModal.close(e)}onDelete(){this._urlsService.removeById(this.userUrl.id).subscribe(()=>{this._toastService.add({title:"URL removed",message:`The redirection for URL ${this.userUrl.longUrl} has been removed`,type:m.p.info}),this.onClose(!0)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.Kz),t.Y36(b.k),t.Y36(U.Q))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-remove-url-dialog"]],decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-info"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Remove URL"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p"),t._uU(6," Are you sure you want to remove the record on "),t.TgZ(7,"span",4),t._uU(8),t.qZA(),t._uU(9,"? If so, the redirect link will not function anymore. "),t.qZA()(),t.TgZ(10,"div",5)(11,"button",6),t.NdJ("click",function(){return o.onClose()}),t._uU(12," Cancel "),t.qZA(),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.onDelete()}),t._uU(14," Remove "),t.qZA()()),2&e&&(t.xp6(8),t.Oqu(o.userUrl?o.userUrl.longUrl:"N/A"))}}),r})();var Z=i(4155);function A(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){const l=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onChangeType(l))}),t._uU(1),t.qZA()}if(2&r){const e=s.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.chartTypesNames[e]," ")}}let R=(()=>{class r{constructor(e,o){this.activeModal=e,this._urlsService=o,this.userUrlStats=[],this.chartOptions={responsive:!0,maintainAspectRatio:!1},this.chartType="polarArea",this.chartTypes=["polarArea","pie","radar"],this.chartTypesNames={polarArea:"Polar area",pie:"Pie",radar:"Radar"},this.chartLabels=[],this.chartData=[{data:[],label:"N/A"}]}get userUrl(){return this._userUrl}set userUrl(e){this._userUrl=e,this._fetchStats()}onClose(){this.activeModal.close()}onChangeType(e){this.chartType=e}_fetchStats(){this._urlsService.readStats(this.userUrl.id).subscribe(e=>{this.userUrlStats=e,this._prepareData()})}_prepareData(){const e=this.userUrlStats.reduce((n,l)=>({...n,[l.referrer]:(n[l.referrer]||0)+1}),{}),o=Object.keys(e);this.chartLabels=o,this.chartData=[{data:Object.values(e),label:"Referrers"}]}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.Kz),t.Y36(U.Q))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-url-stats-dialog"]],decls:18,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-info"],["ngbDropdown","",1,"d-flex","flex-content-justify"],["typeSelect","ngbDropdown"],["type","button","id","dropdownTypeSelect","ngbDropdownAnchor","",1,"btn","btn-outline-primary","mx-auto",3,"focus"],["ngbDropdownMenu","","aria-labelledby","dropdownTypeSelect"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"col-12",2,"height","60vh"],["baseChart","",3,"type","datasets","labels","options"],["ngbDropdownItem","",3,"click"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Usage Statistics"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onClose()}),t.qZA()(),t.TgZ(4,"div",3)(5,"p"),t._uU(6," Find below the statistics we collected on your short URL for "),t.TgZ(7,"span",4),t._uU(8),t.qZA()(),t.TgZ(9,"div",5,6)(11,"button",7),t.NdJ("focus",function(){t.CHM(n);const a=t.MAs(10);return t.KtG(a.open())}),t._uU(12),t.qZA(),t.TgZ(13,"div",8),t.YNc(14,A,2,1,"button",9),t.qZA()(),t._UZ(15,"hr"),t.TgZ(16,"div",10),t._UZ(17,"canvas",11),t.qZA()()}2&e&&(t.xp6(8),t.Oqu(o.userUrl?o.userUrl.longUrl:"N/A"),t.xp6(4),t.hij(" ",o.chartTypesNames[o.chartType]," "),t.xp6(2),t.Q6J("ngForOf",o.chartTypes),t.xp6(3),t.Q6J("type",o.chartType)("datasets",o.chartData)("labels",o.chartLabels)("options",o.chartOptions))},dependencies:[g.sg,c.jt,c.YE,c.Vi,c.TH,Z.jh]}),r})(),S=(()=>{class r{constructor(e){this._toastService=e,this.action="Copy to clipboard"}onCopy(){(0,h.vQ)(this.value,o=>{let n=this.title,l=this.message,a=m.p.info;o&&(n="Failure on copying",l=o.message,a=m.p.error),this._toastService.add({title:n,message:l,type:a})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(b.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-copy-clipboard-btn"]],inputs:{value:"value",title:"title",message:"message",action:"action",className:"className"},decls:2,vars:3,consts:[["type","button",3,"ngClass","ngbTooltip","click"],["src","/assets/img/copy.svg","width","25","height","25",3,"alt"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.onCopy()}),t._UZ(1,"img",1),t.qZA()),2&e&&(t.Q6J("ngClass","btn btn-sm "+o.className)("ngbTooltip",o.action),t.xp6(1),t.Q6J("alt",o.action))},dependencies:[g.mk,c._L]}),r})(),D=(()=>{class r{transform(e,o=!1,n=20,l="..."){if(!e||e.length<=n)return e;let a=0,u=n,_="";return o&&(u=e.length,a=u-n,_=l,l=""),_+e.substring(a,u).trim()+l}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"truncate",type:r,pure:!0}),r})();function k(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th",8),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"span",9),t._uU(5),t.ALo(6,"truncate"),t.qZA(),t._UZ(7,"app-copy-clipboard-btn",10),t.qZA(),t.TgZ(8,"td",11)(9,"a",12),t._uU(10),t.ALo(11,"truncate"),t.qZA(),t._UZ(12,"app-copy-clipboard-btn",13),t.qZA(),t.TgZ(13,"td",11),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",11),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"td"),t._UZ(20,"app-copy-clipboard-btn",14),t.TgZ(21,"button",15),t.NdJ("click",function(){const l=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onDisplayStats(l))}),t._UZ(22,"img",16),t.qZA(),t.TgZ(23,"button",17),t.NdJ("click",function(){const l=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.onDelete(l))}),t._UZ(24,"img",18),t.qZA()()()}if(2&r){const e=s.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Q6J("ngbTooltip",e.longUrl),t.xp6(1),t.hij(" ",t.lcZ(6,11,e.longUrl)," "),t.xp6(2),t.Q6J("value",e.longUrl),t.xp6(2),t.Q6J("ngbTooltip",e.shortUrl)("href",e.shortUrl,t.LSH),t.xp6(1),t.Oqu(t.xi3(11,13,e.shortUrl,!0)),t.xp6(2),t.Q6J("value",e.shortUrl),t.xp6(2),t.Oqu(t.lcZ(15,16,e.createDate)),t.xp6(3),t.Oqu(t.lcZ(18,18,e.expiryDate)),t.xp6(3),t.Q6J("value",e.shortUrl)}}const q=[{path:d._.default,children:[{path:d._.default,redirectTo:`/${d._.home}/${d._.myUrls}`,pathMatch:d.D},{path:d._.myUrls,component:(()=>{class r{constructor(e,o,n){this._ngbModal=e,this._urlsService=o,this._toastService=n,this.rootUrl=(0,h.Cx)(),this.userUrls=[]}ngOnInit(){this.onRefresh()}onAdd(){this._ngbModal.open(v).result.then(o=>{!o||this.onRefresh()})}onCopy(e){(0,h.vQ)(e.shortUrl,n=>{let l="URL copied",a="The short URL has been copied to your clipboard",u=m.p.info;n&&(l="Failure on copying URL",a=n.message,u=m.p.error),this._toastService.add({title:l,message:a,type:u})})}onDisplayStats(e){this._ngbModal.open(R,{fullscreen:!0}).componentInstance.userUrl=e}onDelete(e){const o=this._ngbModal.open(T);o.componentInstance.userUrl=e,o.result.then(n=>{!n||this.onRefresh()})}onRefresh(){this._urlsService.readAll().subscribe(e=>this.userUrls=e.map(o=>({...o,shortUrl:[this.rootUrl,o.shortUrl].join("/")})))}trackById(e,o){return o.id}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.FF),t.Y36(U.Q),t.Y36(b.k))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-my-urls"]],decls:23,vars:2,consts:[[1,"d-xs-table-row","d-md-flex","col-12"],[1,"d-flex","align-items-center","ms-auto"],["type","button","id","btn-shorten-url",1,"btn","btn-outline-secondary","btn-sm","me-1","ms-auto",3,"click"],["type","button","id","btn-shorten-url",1,"btn","btn-outline-primary","btn-sm","me-2","ms-1",3,"click"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"d-none","d-md-table-cell"],[4,"ngFor","ngForOf","ngForTrackBy"],["scope","row"],[3,"ngbTooltip"],["className","d-none d-md-table-cell","title","URL copied","message","The long URL has been copied to your clipboard",3,"value"],[1,"d-none","d-md-table-cell"],["target","_blank",3,"ngbTooltip","href"],["title","URL copied","message","The short URL has been copied to your clipboard",3,"value"],["className","d-table-cell d-md-none","title","URL copied","message","The short URL has been copied to your clipboard",3,"value"],["type","button","ngbTooltip","Display URL Stats",1,"btn","btn-sm",3,"click"],["src","/assets/img/stats.svg","alt","Display URL Stats","width","25","height","25"],["type","button","ngbTooltip","Remove Short URL",1,"btn","btn-sm",3,"click"],["src","/assets/img/delete.svg","alt","Delete Short URL","width","25","height","25"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.onRefresh()}),t._uU(3," Refresh "),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.onAdd()}),t._uU(5," Shorten an URL "),t.qZA()()(),t.TgZ(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),t._uU(10,"#"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"URL"),t.qZA(),t.TgZ(13,"th",6),t._uU(14,"Short URL"),t.qZA(),t.TgZ(15,"th",6),t._uU(16,"Create Date"),t.qZA(),t.TgZ(17,"th",6),t._uU(18,"Expiry Date"),t.qZA(),t.TgZ(19,"th",5),t._uU(20,"Actions"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,k,25,20,"tr",7),t.qZA()()),2&e&&(t.xp6(22),t.Q6J("ngForOf",o.userUrls)("ngForTrackBy",o.trackById))},dependencies:[g.sg,c._L,S,g.uU,D]}),r})(),data:{title:"My URLs",description:"Manage your URLs"}}]}];let M=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[y.Bz.forChild(q),y.Bz]}),r})();var J=i(4466);let w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[J.m,M]}),r})()}}]);